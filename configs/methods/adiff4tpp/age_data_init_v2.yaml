config_factory: [start, datasets/age/age, methods/adiff4tpp/base]

trainer:
  ema:
    beta: 0.9999
    update_after_step: 40000
    update_every: 10

model:
  autoencoder:
    params:
      d_token: 8
      num_layers: 10
      n_head: 4
      factor: 28
    checkpoint: /workspace/transactionsv2/transaction-generation/log/generation/age/ready/vae/seed_0/ckpt/epoch__0351_-_loss__-0.002042.ckpt
  
  latent_encoder:
    params:
      data_init: True

data_conf:
  train_transforms:
    '1':
      TimeToDiff:
        disable: True
  val_transforms:
    '1':
      TimeToDiff:
        disable: True

optimizer:
  name: AdamW
  params:
    lr: 1.e-5
    betas:
     - 0.9
     - 0.999
    eps: 1e-8
    weight_decay: 1.e-2
    wd_exclude_bias_ln: True

schedulers:
  "step":
    StepLR:
      step_size: 10 # no scheduler
      gamma: 0.3

evaluator:
  devices: ["cuda:0", "cuda:0", "cuda:0"] # adjust for your hardware, ALWAYS SET MORE THAN 1 DEVICE (possible repeated)
  metrics:
    - OTD
    - OTD: {f1_average: micro}
    - OTD: {focus_on: [amount_rur]}
    - OTD: {focus_on: [trans_date]}
    - OTD: {focus_on: [small_group]}
    - OTD: {focus_on: [small_group], f1_average: micro}
    - OTD: {max_shift: 0, focus_on: [amount_rur]}
    - OTD: {max_shift: 0, focus_on: [trans_date]}
    - OTD: {max_shift: 0, focus_on: [small_group]}
    - OTD: {max_shift: 0, focus_on: [small_group], f1_average: micro}
    - Cardinality
    - Detection:
        report_std: True
        condition_len: ${data_conf.generation_len}
        verbose: False
    - OTD: {global_denom: False}
    - OTD: {focus_on: [amount_rur], global_denom: False}
    - OTD: {focus_on: [trans_date], global_denom: False}
